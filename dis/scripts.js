const pokemonRepo=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=151";function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(t){"object"==typeof t?e.push(t):console.error("you need an object")}function a(e){l(e).then(function(){let t=$(".modal-body"),n=$(".modal-title"),a=$(".modal-header");n.empty(),t.empty();let i=$('<img class="modal-img img-fluid">');i.attr("src",e.imageUrl);let s=$('<h1 class="center">'+o(e.name)+"</h1>"),l=$("<h2>Height: "+10*e.height+" cm</h2>"),r=$("<h2>Ability: "+e.abilities+"</h2>"),c=$("<h2>Type: "+e.types[0]+"</h2>"),d=e.types[0];$(t).addClass(`${d.toLowerCase()}-bg`),$(a).addClass(`${d.toLowerCase()}-bg`),$("#close").on("click",function(){$(a).removeClass(`${d.toLowerCase()}-bg`),$(t).removeClass(`${d.toLowerCase()}-bg`)}),a.append(n),n.append(s),t.append(i),t.append(c),t.append(l),t.append(r)})}function i(){let e=$(".pokedex-window"),t=$("<div></div>");t.text("Loading List!"),t.addClass("msg-board"),e.prepend(t)}function s(){window.setTimeout(function(){$(".msg-board").remove()},500)}function l(e){i();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.base_stat=t.base_stat,e.types=t.types,e.abilities=[],t.abilities.forEach(function(t){e.abilities.push(" "+o(t.ability.name))}),e.types=[],t.types.forEach(function(t){e.types.push(" "+o(t.type.name))})}).then(function(){s()}).catch(function(e){console.error(e)})}return $(document).ready(function(){$("#modal").on("show.bs.modal",function(){var e=$(".modal");$(".pokedex-window-scrollbox").append(e)})}),$(document).ready(function(){$("#search-bar").on("keyup",function(){var e=$(this).val().toLowerCase();$(".pokemon-list *").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}),{add:n,getAll:function(){return e},addListItem:function(e){let t=$(".list-group"),n=$('<li class="list-group-item list-group-action"></li>'),i=$("<button></button>");i.text(o(e.name)),i.addClass("btn"),i.addClass("btn-secondary"),i.addClass("btn-lg"),i.attr("data-target","#modal"),i.attr("data-toggle","modal"),n.append(i),t.append(n),i.on("click",function(){a(e)})},loadList:function(){return i(),fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).then(function(){s()}).catch(function(e){s(),console.error(e)})},loadDetails:l,showDetails:a,powerDown:function(){$(".header-powerbtn").on("click",function(){"none"===$("#overlay")[0].style.display?window.confirm("Are you sure you want to power down?")&&($("#overlay")[0].style.display="block"):$("#overlay")[0].style.display="none"})},hideLoading:s}}();pokemonRepo.loadList().then(function(){pokemonRepo.getAll().forEach(function(e){pokemonRepo.addListItem(e)})}),pokemonRepo.powerDown();
